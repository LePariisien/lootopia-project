<div class="bg-[#F9FAF8] border border-green-200 rounded-lg p-4">
  <div class="flex justify-between items-center mb-4">
    <h3 class="font-bold text-green-900 flex items-center">
      <span class="bg-green-600 text-white rounded-full w-6 h-6 inline-flex items-center justify-center mr-2">
        {{ stepNumber }}
      </span>
      {{ step.title || 'Nouvelle étape' }}
    </h3>
    <button (click)="onRemove()"
      class="text-red-500 hover:text-red-700 hover:bg-red-50 p-1 rounded-md transition-colors duration-200">
      <lucide-icon [img]="Trash2" class="size-5"></lucide-icon>
    </button>
  </div>

  <div class="space-y-4">
    <div class="space-y-2">
      <label [htmlFor]="'step-' + step.id + '-title'" class="text-green-800 block">
        Titre de l'étape <span class="text-[#FED35C]">*</span>
      </label>
      <input [id]="'step-' + step.id + '-title'" type="text" required placeholder="Ex: Le point de départ"
        [(ngModel)]="step.title"
        class="w-full p-2 bg-[#E7F3EB] border border-green-200 rounded-md focus:outline-none focus:border-green-400 focus:ring-1 focus:ring-green-400 placeholder-gray-500" />
    </div>

    <div class="space-y-2">
      <label [htmlFor]="'step-' + step.id + '-clue'" class="text-green-800 block">
        Indice <span class="text-[#FED35C]">*</span>
      </label>
      <textarea [id]="'step-' + step.id + '-clue'" required
        placeholder="Décrivez l'indice que les participants devront résoudre..." [(ngModel)]="step.clue"
        class="w-full p-2 min-h-[80px] bg-[#E7F3EB] border border-green-200 rounded-md focus:outline-none focus:border-green-400 focus:ring-1 focus:ring-green-400 placeholder-gray-500"></textarea>
    </div>

    <div class="space-y-2">
      <app-location-search
        [(model)]="step.location"
        [label]="'Lieu principal'"
        [placeholder]="'Ex: Tour Eiffel, Paris'"
        [inputId]="'location-' + step.id"
        (coordinatesChange)="onStepCoordinatesChange($event, step)">
      </app-location-search>
    </div>
  </div>
</div>
